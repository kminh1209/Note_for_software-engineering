# 10. Testing

- 테스트 작업: 시험할 소프트웨어에 테스트 케이스를 주어 실행시킨 후 시스템의 동작이 예상한대로 실행되는지 확인하는 것
- 테스트는 두 가지 접근 방식을 기반으로 수행될 수 있다.
  - 블랙박스 테스트(기능): 실제 구현을 고려하지 않고 기능을 테스트할 때
  - 화이트박스 테스트(구현): 기능 테스트 + 구현 방식도 분석
  - 검증과 확인의 차이
    - 검증(verification): 제품이 요구 명세의 기능, 비기능 요구 사항을 얼마나 잘 준수하는가
    - 확인(validation): 유효성 검사, 사용자의 기대를 얼마나 잘 중촉하는가



## 10.1 테스트 기초

- 테스트: 결함이나 원치 않는 동작을 찾아내고 소프트웨어가 요구와 제약에 맞는지 검증하는 작업



### 10.1.1 버그, 오류, 결함, 고장

- 버그: 문제, 결함 등
- 오류(error): 개발자로 인한 설계나 코딩의 실수
- 결함(defect): 오류가 있는 경우 결함이 발생할 수 있다.
- 고장(failure): 잘못된 결과. 시스템이 원하는 작업을 수행할 수 없는 상황이다.



### 10.1.2 테스트 원리

- (1) 테스트는 오류를 발견하기 위해 프로그램을 실행하는 것이다.
- (2) 완벽한 테스트는 불가능하다.
- (3) 테스트는 창조적이고 힘든 일이다.
- (4) 테스트는 오류의 유입을 방지할 수 있다.
- (5) 테스트는 구현과 관계없는 독립된 팀에 의해 수행되어야 한다.



### 10.1.3 테스트 작업 과정

테스트 작업은 다섯 가지 단계의 준비에 의해 이루어진다.

- (1) 테스트에 의해 무엇을 점검할 것인지 정한다.
- (2) 테스트 방법을 결정한다.
- (3) 테스트 케이스를 개발한다.
  - 테스트 케이스: 테스트 자료나 실행될 조건
- (4) 테스트의 예상되는 올바른 결과를 작성한다.
  - 테스트 오라클(test oracle): 테스트 케이스 실행이 통과되었는지 판단하기 위한 기준
- (5) 테스트 케이스로 실행시킨다.
  - 테스트 하니스(test harness): 시스템의 일부 기능만 시험하기 위해 소프트웨어에 변경을 가하는 것



### 테스트 단계

테스트 단계는 여러 가지 단계로 나누어 진행된다.

- 단위 테스트(unit testing): 각 모듈을 시험하는 것
- 통합 테스트(intergration testing): 전체 시스템을 이루는 모듈을 모아 통합적으로 시험하는 것
- 시스템 테스트(system testing): 완성된 제품에 대한 시험
- 인수 테스트(acceptance testing): 사용될 환경에 설치하고 사용자가 직접 사용하여 시험
- 리그레션 테스트: 시스템이 설치된 후 유지보수 단계에서 이루어지는 작업



## 10.5 통합 테스트

통합 테스트는 시스템을 구성하는 여러 모듈을 어떤 순서로 결합하여 테스트할 것인지에 따라 다음으로 나누니다.

- 빅뱅(big-bang): 시스템을 구성하는 모듈을 각각 따로 구현하고 전체 시스템을 단번에 묶어 시험하는 방법
- 점증적 테스트 방법
  - 하향식(top-down): 명령어 처리 모듈을 먼저 구현하고 테스트한다.
    - 명령어 처리 모듈: 시스템 구조도의 최상위에 있는 모듈
    - 다음 단계의 모듈이 구현, 시험 완료되었으면 추가한다.
    - 계속 하위층의 모듈로 내려가면서 테스트하고 추가하여 전체 시스템이 모두 결합될 때까지 계속한다.
  - 상향식(bottom-up): 시스템 구조도의 최하위층에 있는 모듈을 먼저 구현하고 테스트한다. 
  - 연쇄식(threads): 특수하고 중요한 기능을 수행하는 최소 모듈 집합을 먼저 구현한다. 보조적인 기능의 모듈은 나중에 구현하여 테스트한 후 계속 추가한다.



###  테스트 드라이버와 스텁

- 테스트 하니스(test harness) 소프트웨어: 시스템을 테스트하기 위해 작성된 별도의 프로그램
- 테스트 드라이버: 시험 대상 모듈을 호출하는 간이 소프트웨어
  - 상향식 통합이 사용
- 스텁(stub): 시험 대상 모듈이 호출하는 또 다른 모듈의 기능을 대신하여 작성되 간이 소프트웨어



### 10.5.1 빅뱅 통합

- 빅뱅 통합: 모든 모듈을 모아 통합하는 방법
- 장점
  - 통합 테스트 이전에 모든 모듈의 개발이 끝나야 하므로 일정 관리가 편한다.
  - 스텁을 구성할 필요가 없다.
- 단점
  - 모든 요소를 동시에 통합하므로 중대한 오류가 발생할 수 있다.
  - 버그가 발견되면 원인을 찾기 위해 모듈을 분리하기 어렵다.
  - 모든 모듈을 함꼐 테스트하므로 오류의 위치와 원인을 찾기도 어렵다.
  - 프로덕션 환경에서 치명적인 버그가 발생할 수 있다.
  - 일정 계획에 융통성이 없다.



### 10.5.2 하향식 통합

- (1) 시스템 구조도의 위층에 있는 모듈부터 아래층의 모듈로 내려오면서 통합된다.
- (2) 최송위 층의 모듈에 대한 드라이버와 스텁을 작성한 후 통과되면 스텁을 대상 모듈로 교체한다.
  - 이때 테스트 대상 모듈이 호출하는 모듈은 스텁을 작성하여 통합 테스트한다.
- 장점
  - 점증적이므로 하드웨어 사용이 분산되고 오류 원인을 찾기 쉽다.
  - 상위층 모듈을 먼저 테스트하므로 시스템의 계층 구조와 상위층의 중요한 인터페이스를 조기에 시험할 수 있다.
  - 스텁의 사용으로 시스템의 모습을 사용자에게 일짝 보여줄 수 있다.
- 단점
  - 입출력을 수행하는 모듈이 대부분 최하위에 존재하여 테스트하기 어렵다.
  - 최하위층 모듈이 중요한 기능을 해도 충분한 시험을 할 수 없다.



### 10.5.3 상향식 통합

- (1) 최하위 모듈을 먼저 통합하여 테스트한다.
- (2) 다음에 위층의 모듈이 추가되어 서브시스템을 이룬다.
- 스텁은 필요하지 않으나 드라이버가 필요하다.
- 장점
  - 점증적이므로 하드웨어 사용이 분산되고 오류 원인을 찾기 쉽다.
  - 하위층의 모듈을 상위층의 모듈보다 더 많이 테스트한다.
- 단점
  - 테스트 초기에 시스템의 뼈대가 갖추어지지 않는다.
  - 상위층의 모듈은 테스트를 많이 하지 못한다.



### 10.5.4 연쇄식 통합

- 특정 기능을 수행하는 모듈의 최소 단위(스레드)로부터 시작한다.
  - 입력, 출력, 기본 기능을 수행하는 모듈들로부터 통합 테스트 해 나가는 방법이다.
- 처음에 선택되는 스레드는 시스템의 주요 기능을 담당한다.
- 구축된 스레드에 다른 모듈을 추가시켜 나간다.
- 장점
  - 통합 초기에 시스템 골격을 보여주고 사용자의 의견을 빨리 받을 수 있다.
  - 시스템이 여러 개발자에게 나누어 개발될 수 있고 각 프로그래머도 시스템의 부분적인 개발 진도를 확인할 수 있다.
- 단점
  - 스레드의 구성이 복잡해질 수 있다. 따라서 드라이버와 스텁 작성에서 오류가 발생할 수 있다.



## 10.6 시스템 및 인수 테스트

컴포넌트가 통합되면 시스템 테스트 기법으로 전체 시스템이 기능적 요구와 비기능적 요구를 만족하는지 확인한다. 다음과 같은 종류가 있다.

- 기능 테스트: 기능적 요구에 대한 시스템 수준의 테스트
- 성능 테스트: 비기능적 요구인 성능에 대한 테스트
- 보안 테스트: 목표 시스템 보안 취약점을 찾아내기 위한 테스트
- 사용성 테스트: 사용자 인터페이스의 요소, 인터렉션, 오류 메시지 등의 결함을 발견하기 위한 테스트
- 인수 테스트: 개발 의뢰자가 개발 시스템의 환경에서 프로젝트 계약에 명시된기준에 대하여 사용용이성, 가능성, 성능을 테스트하는 것
- 설치 테스트: 개발 의뢰자가 목표 시스템의 환경에서 사용용이성, 가능성, 성능을 테스트하는 것



### 10.6.1 기능 테스트

- 기능 테스트: 기능적 요구와 시스템의 차이를 발견하는 것
- 오류를 유발할 가능성이 많은 테스트를 선택해야 한다:유스케이스 모델을 검토하여 오류를 일으킬만한 유스케이스 인스턴스를 찾아낸다.
  - 동등 분할이나 경곗값 분석과 같은 블랙박스 기법을 이용한다.
  - 일반적인 사례와 예외적인 사례 모두 포함한다.



### 10.6.2 성능 테스트

- 성능 테스트: 시스템의 여러 측면을 평가하는 테스트
  - 작업 부하(workload): 최대 작업 부하와 평균 부하로 측정
  - 처리량(throughput): 예) 하루에 처리하는 트랜젝션의 수, 시간 당 처리하는 메일의 수 등
  - 반응 시간(response time): 시스템이 각 요구를 처리하는 데 걸리는 총 시간이다.
  - 효율성: 시스템이 주어진 작업 부하를 처리하기 위해 필요한 CPU 시간과 메모리와 같은 자원의 양

- 스트레스 테스트: 매우 심한 작업 부하를 처리하고 견딜 수 있는 시스템의 능력을 측정하는 테스트
- 시뮬레이션 기반의 성능 테스트
  - 예) 프로파일링
    - (1) 사용자 모델을 구축한다. 예) 여러 타입의 트랜잭션이 분산되어 발생함을 나타내는 사용 프로파일을 트랜잭션 로그에 의해 생성한다.
    - (2) 트랜잭션 타입에 대한 프로토타입을 구축하고 트랜잭션 인스턴스를 생성하기 위해 사용한다.
    - (3) 난수 생성기로 사용 프로파일에 비례한 작업 부하를 생성한다.



### 10.6.3 보안 테스트

- 보안 테스트: 해커에게 이용될 수 있는 의도하지 않는 기능과 동작 시스템을 찾아내기 위한 테스트
- 테스트 케이스 생성에 화이트박스 테스트를 적용할 수 있음: 정적 테스트 도구가 원시코드를 분석하여 취약한 패턴을 찾는다.
- 블랙박스 테스팅 방법을 사용: 시스템을 공격하기 위한 입력을 제공하는데 도움이 됨. 요구와 알려진 공격 패턴으로부터 추출한 테스트 케이스를 테스트할 때 사용
- 랜덤 테스트를 사용
  - 입력 퍼징(input fuzzing): 랜덤 테스트의 변형. 정상적 입력을 약간 변형하여 시스템을 테스트하기 위한 결과로 사용



### 10.6.4 UI 테스트

- UI 테스트: 인간공학적인 결함들을 발견하기 위한 테스트
- 다음과 같은 종류의 결함이 있다.
  - (1) 보고 느끼는 UI에 대한
  - (2) 데이터 입력과 출력 디스플레이에 대한: 시스템이 정확한 입력과 출력 데이터, 타입, 포맷을 사용하는지 검사한다.
  - (3) 액터-시스템 사이의 동작
  - (4) 오류 처리에 대한: 시스템 또는 사용자에 의해 발생된다. 오류 미처리, 부정확, 부적절 등을 포함한다.
  - (5) 문서와 도움말에 대한
- UI 테스트 도구를 사용
  - 예) 정적 분석 도구: 콜백 함수에 있는 액션이 빠진 것과 같은 참조되었으나 존재하지 않는 웹 페이지를 찾는데 도움이 된다.



### 10.6.5 인수 테스트

- 인수 테스트: 시스템을 당장 사용할 수 있도록 모든 준비가 되었는지 확인하기 위한 테스트
- 인수 테스트 방법: 시스템 테스트와 비슷하나 사용자 환경에서 수작업 자료로 시스템을 테스트한다.
- 불특정 다수의 사용자를 위해 작성한 소프트웨어의 인수 시험에는 다음 종류가 있다.
  - 알파 테스트: 선택된 사용자가 개발 환경에서 시험하는 것
  - 베타 테스트: 선택된 고객의 사용 환경에서 시험하는 것
    - 필드 테스트(field testing): 시스템을 배우는 시험적인 기간이라는 의미에서 부름
  - 장점: 실제 사용 환경에서 사용할 사람에 의해 시험하므로 매우 현실적이다.



### 테스트 도구

테스트 도구에는 여러 가지가 있다.

- 테스트 관리 도구: 테스트 작업을 계획하고 테스트 케이스를 설계, 수행, 트래킹, 보고하는 기능에 대한 도구
- 기능 테스트 도구: 실제 데이터와 예상 데이터를 비교해 응용 프로그램 모듈의 기능을 검증하는 기능을 자동화한 도구
- 모듈 테스트 도구: 단위 테스트를 위해 테스트 케이스와 테스트 결과의 체크를 구현하고 실행하기 쉽도록 만든 패키지
- 커버리지 도구: 테스트 케이스 실행 후 커버리지를 측정하는 도구
- 성능 테스트 도구: 최대 트래픽에서 응응의 성능 및 서버 응답 시간을 측정하는 도구
- 보안 테스트 도구: 사용자 세션을 가로채고, 보안되지 않은 영역을 악용하는 보안 취약점 스캔하는 도구

